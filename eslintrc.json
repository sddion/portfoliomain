{
  "root": true,
  "extends": ["next/core-web-vitals"],
  "rules": {
    "no-console": ["warn", { "allow": ["warn", "error"] }],
    "no-restricted-imports": [
      "error",
      {
        "paths": [
          { "name": "fs", "message": "Do not import Node server modules in client code." },
          { "name": "path", "message": "Do not import Node server modules in client code." },
          { "name": "child_process", "message": "Do not import server-only modules in client code." },
          { "name": "crypto", "message": "Use Web Crypto or call an API route." }
        ],
        "patterns": [
          {
            "group": ["@/app/api/*", "@/lib/server/*", "**/server-only"],
            "message": "Backend routes/modules must not be imported into frontend components. Use fetch to call API routes."
          }
        ]
      }
    ]
  },
  "overrides": [
    {
      "files": ["components/**/*.{ts,tsx}", "app/**/page.{ts,tsx}", "app/**/client/**/*.{ts,tsx}"],
      "rules": {
        "no-restricted-imports": [
          "error",
          {
            "paths": [{ "name": "next/server", "message": "Do not use next/server in client components." }],
            "patterns": ["@/app/api/*", "@/lib/server/*", "server-only", "fs", "path", "child_process", "crypto"]
          }
        ]
      }
    }
  ]
}
